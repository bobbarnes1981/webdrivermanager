/*
 * (C) Copyright 2019 Robert barnes
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */

namespace WebDriverManagerSharp.UnitTests.GitHub
{
    using Newtonsoft.Json;
    using NUnit.Framework;
    using WebDriverManagerSharp.GitHubApi;

    [TestFixture]
    public class ApiTests
    {
        private const string data = "[  {    \"url\": \"https://api.github.com/repos/mozilla/geckodriver/releases/20654191\",    \"assets_url\": \"https://api.github.com/repos/mozilla/geckodriver/releases/20654191/assets\",    \"upload_url\": \"https://uploads.github.com/repos/mozilla/geckodriver/releases/20654191/assets{?name,label}\",    \"html_url\": \"https://github.com/mozilla/geckodriver/releases/tag/v0.26.0\",    \"id\": 20654191,    \"node_id\": \"MDc6UmVsZWFzZTIwNjU0MTkx\",    \"tag_name\": \"v0.26.0\",    \"target_commitish\": \"master\",    \"name\": \"\",    \"draft\": false,    \"author\": {      \"login\": \"andreastt\",      \"id\": 399120,      \"node_id\": \"MDQ6VXNlcjM5OTEyMA==\",      \"avatar_url\": \"https://avatars3.githubusercontent.com/u/399120?v=4\",      \"gravatar_id\": \"\",      \"url\": \"https://api.github.com/users/andreastt\",      \"html_url\": \"https://github.com/andreastt\",      \"followers_url\": \"https://api.github.com/users/andreastt/followers\",      \"following_url\": \"https://api.github.com/users/andreastt/following{/other_user}\",      \"gists_url\": \"https://api.github.com/users/andreastt/gists{/gist_id}\",      \"starred_url\": \"https://api.github.com/users/andreastt/starred{/owner}{/repo}\",      \"subscriptions_url\": \"https://api.github.com/users/andreastt/subscriptions\",      \"organizations_url\": \"https://api.github.com/users/andreastt/orgs\",      \"repos_url\": \"https://api.github.com/users/andreastt/repos\",      \"events_url\": \"https://api.github.com/users/andreastt/events{/privacy}\",      \"received_events_url\": \"https://api.github.com/users/andreastt/received_events\",      \"type\": \"User\",      \"site_admin\": false    },    \"prerelease\": false,    \"created_at\": \"2019-08-16T10:41:23Z\",    \"published_at\": \"2019-10-11T23:34:06Z\",    \"assets\": [      {        \"url\": \"https://api.github.com/repos/mozilla/geckodriver/releases/assets/15445299\",        \"id\": 15445299,        \"node_id\": \"MDEyOlJlbGVhc2VBc3NldDE1NDQ1Mjk5\",        \"name\": \"geckodriver-v0.26.0-linux32.tar.gz\",        \"label\": null,        \"uploader\": {          \"login\": \"whimboo\",          \"id\": 129603,          \"node_id\": \"MDQ6VXNlcjEyOTYwMw==\",          \"avatar_url\": \"https://avatars2.githubusercontent.com/u/129603?v=4\",          \"gravatar_id\": \"\",          \"url\": \"https://api.github.com/users/whimboo\",          \"html_url\": \"https://github.com/whimboo\",          \"followers_url\": \"https://api.github.com/users/whimboo/followers\",          \"following_url\": \"https://api.github.com/users/whimboo/following{/other_user}\",          \"gists_url\": \"https://api.github.com/users/whimboo/gists{/gist_id}\",          \"starred_url\": \"https://api.github.com/users/whimboo/starred{/owner}{/repo}\",          \"subscriptions_url\": \"https://api.github.com/users/whimboo/subscriptions\",          \"organizations_url\": \"https://api.github.com/users/whimboo/orgs\",          \"repos_url\": \"https://api.github.com/users/whimboo/repos\",          \"events_url\": \"https://api.github.com/users/whimboo/events{/privacy}\",          \"received_events_url\": \"https://api.github.com/users/whimboo/received_events\",          \"type\": \"User\",          \"site_admin\": false        },        \"content_type\": \"application/x-gzip\",        \"state\": \"uploaded\",        \"size\": 2330668,        \"download_count\": 6228,        \"created_at\": \"2019-10-12T18:17:37Z\",        \"updated_at\": \"2019-10-12T18:17:43Z\",        \"browser_download_url\": \"https://github.com/mozilla/geckodriver/releases/download/v0.26.0/geckodriver-v0.26.0-linux32.tar.gz\"      }    ],    \"tarball_url\": \"https://api.github.com/repos/mozilla/geckodriver/tarball/v0.26.0\",    \"zipball_url\": \"https://api.github.com/repos/mozilla/geckodriver/zipball/v0.26.0\",    \"body\": \"Built from [`e9783a644016`](https://hg.mozilla.org/mozilla-central/rev/e9783a644016aa9b317887076618425586730d73).\r\n\r\nNote that with this release the minimum recommended Firefox version\r\nhas changed to Firefox ≥60.\r\n\r\n### Known problems\r\n\r\n- _macOS 10.15 (Catalina):_\r\n\r\n  Due to the recent requirement from Apple that all programs must\r\n  be notarized, geckodriver will not work on Catalina if you manually\r\n  download it through another notarized program, such as Firefox.\r\n\r\n  Whilst we are working on a repackaging fix for this problem, you\r\n  can find more details on how to work around this issue in the\r\n  [macOS notarization] section of the documentation.\r\n\r\n- _Windows:_\r\n\r\n  You must still have the [Microsoft Visual Studio redistributable\r\n  runtime] installed on your system for the binary to run.  This\r\n  is a known bug which we weren't able fix for this release.\r\n\r\n### Added\r\n\r\n- Support for Firefox on Android\r\n\r\n  Starting with this release geckodriver is able to connect to\r\n  Firefox on Android systems, and to control packages based on\r\n  [GeckoView].\r\n\r\n  Support for Android works by the geckodriver process running on\r\n  a host system and Firefox running within either an emulator or\r\n  on a physical device connected to the host system.  This requires\r\n  you to first [enable remote debugging on the Android device].\r\n\r\n  The WebDriver client must set the [`platformName` capability] to\r\n  \\\"`android`\\\" and the `androidPackage` capability within\r\n  [`moz:firefoxOptions`] to the Android package name of the Firefox\r\n  application.\r\n\r\n  The full list of new capabilities specific to Android, instructions\r\n  how to use them, and examples can be found in the [`moz:firefoxOptions`]\r\n  documentation on MDN.\r\n\r\n  When the session is created, the `platformName` capability will\r\n  return \\\"`android`\\\" instead of reporting the platform of the host\r\n  system.\r\n\r\n### Changed\r\n\r\n- Continued Marionette refactoring changes\r\n\r\n  0.25.0 came with a series of internal changes for how geckodriver\r\n  communicates with Firefox over the Marionette protocol.  This\r\n  release contains the second half of the refactoring work.\r\n\r\n### Fixed\r\n\r\n- Connection attempts to Firefox made more reliable\r\n\r\n  geckodriver now waits for the Marionette handshake before assuming\r\n  the session has been established.  This should improve reliability\r\n  in creating new WebDriver sessions.\r\n\r\n- Corrected error codes used during session creation\r\n\r\n  When a new session was being configured with invalid input data,\r\n  the error codes returned was not always consistent.  Attempting\r\n  to start a session with a malformed capabilities configuration\r\n  will now return the [invalid argument] error consistently.\r\n\r\n\r\n[README]: https://github.com/mozilla/geckodriver/blob/master/README.md\r\n[Browser Toolbox]: https://developer.mozilla.org/en-US/docs/Tools/Browser_Toolbox\r\n[WebDriver conformance]: https://wpt.fyi/results/webdriver/tests?label=experimental\r\n[`moz:firefoxOptions`]: https://developer.mozilla.org/en-US/docs/Web/WebDriver/Capabilities/firefoxOptions\r\n[Microsoft Visual Studio redistributable runtime]: https://support.microsoft.com/en-us/help/2977003/the-latest-supported-visual-c-downloads\r\n[GeckoView]: https://wiki.mozilla.org/Mobile/GeckoView\r\n[Firefox Preview]: https://play.google.com/store/apps/details?id=org.mozilla.fenix\r\n[Firefox Reality]: https://play.google.com/store/apps/details?id=org.mozilla.vrbrowser\r\n[Capabilities]: https://firefox-source-docs.mozilla.org/testing/geckodriver/Capabilities.html\r\n[enable remote debugging on the Android device]: https://developers.google.com/web/tools/chrome-devtools/remote-debugging\r\n[macOS notarization]: https://firefox-source-docs.mozilla.org/testing/geckodriver/Notarization.html\r\n\r\n[`CloseWindowResponse`]: https://docs.rs/webdriver/newest/webdriver/response/struct.CloseWindowResponse.html\r\n[`CookieResponse`]: https://docs.rs/webdriver/newest/webdriver/response/struct.CookieResponse.html\r\n[`DeleteSession`]: https://docs.rs/webdriver/newest/webdriver/command/enum.WebDriverCommand.html#variant.DeleteSession\r\n[`ElementClickIntercepted`]: https://docs.rs/webdriver/newest/webdriver/error/enum.ErrorStatus.html#variant.ElementClickIntercepted\r\n[`ElementNotInteractable`]: https://docs.rs/webdriver/newest/webdriver/error/enum.ErrorStatus.html#variant.ElementNotInteractable\r\n[`FullscreenWindow`]: https://docs.rs/webdriver/newest/webdriver/command/enum.WebDriverCommand.html#variant.FullscreenWindow\r\n[`GetNamedCookie`]: https://docs.rs/webdriver/newest/webdriver/command/enum.WebDriverCommand.html#variant.GetNamedCookie\r\n[`GetWindowRect`]: https://docs.rs/webdriver/newest/webdriver/command/enum.WebDriverCommand.html#variant.GetWindowRect\r\n[`InvalidCoordinates`]: https://docs.rs/webdriver/newest/webdriver/error/enum.ErrorStatus.html#variant.InvalidCoordinates\r\n[`MaximizeWindow`]: https://docs.rs/webdriver/newest/webdriver/command/enum.WebDriverCommand.html#variant.MaximizeWindow\r\n[`MinimizeWindow`]: https://docs.rs/webdriver/newest/webdriver/command/enum.WebDriverCommand.html#variant.MinimizeWindow\r\n[`NewSession`]: https://docs.rs/webdriver/newest/webdriver/command/enum.WebDriverCommand.html#variant.NewSession\r\n[`NoSuchCookie`]: https://docs.rs/webdriver/newest/webdriver/error/enum.ErrorStatus.html#variant.NoSuchCookie\r\n[`RectResponse`]: https://docs.rs/webdriver/0.27.0/webdriver/response/struct.RectResponse.html\r\n[`SendKeysParameters`]: https://docs.rs/webdriver/newest/webdriver/command/struct.SendKeysParameters.html\r\n[`SessionNotCreated`]: https://docs.rs/webdriver/newest/webdriver/error/enum.ErrorStatus.html#variant.SessionNotCreated\r\n[`SetTimeouts`]: https://docs.rs/webdriver/newest/webdriver/command/enum.WebDriverCommand.html#variant.SetTimeouts\r\n[`SetWindowRect`]: https://docs.rs/webdriver/newest/webdriver/command/enum.WebDriverCommand.html#variant.SetWindowRect\r\n[`StaleElementReference`]: https://docs.rs/webdriver/newest/webdriver/error/enum.ErrorStatus.html#variant.StaleElementReference\r\n[`UnableToCaptureScreen`]: https://docs.rs/webdriver/newest/webdriver/error/enum.ErrorStatus.html#variant.UnableToCaptureScreen\r\n[`UnknownCommand`]: https://docs.rs/webdriver/newest/webdriver/error/enum.ErrorStatus.html#variant.UnknownCommand\r\n[`UnknownError`]: https://docs.rs/webdriver/newest/webdriver/error/enum.ErrorStatus.html#variant.UnknownError\r\n[`WindowRectParameters`]: https://docs.rs/webdriver/newest/webdriver/command/struct.WindowRectParameters.html\r\n\r\n[Add Cookie]: https://developer.mozilla.org/en-US/docs/Web/WebDriver/Commands/AddCookie\r\n[invalid argument]: https://developer.mozilla.org/en-US/docs/Web/WebDriver/Errors/InvalidArgument\r\n[invalid session id]: https://developer.mozilla.org/en-US/docs/Web/WebDriver/Errors/InvalidSessionID\r\n[script timeout]: https://developer.mozilla.org/en-US/docs/Web/WebDriver/Errors/ScriptTimeout\r\n[timeout]: https://developer.mozilla.org/en-US/docs/Web/WebDriver/Errors/Timeout\r\n[timeout object]: https://developer.mozilla.org/en-US/docs/Web/WebDriver/Timeouts\r\n[`platformName` capability]: https://developer.mozilla.org/en-US/docs/Web/WebDriver/Capabilities#platformName\r\n\r\n[hyper]: https://hyper.rs/\r\n[mozrunner crate]: https://crates.io/crates/mozrunner\r\n[serde]: https://serde.rs/\r\n[webdriver crate]: https://crates.io/crates/webdriver\r\n\r\n[Actions]: https://w3c.github.io/webdriver/webdriver-spec.html#actions\r\n[Delete Session]: https://w3c.github.io/webdriver/webdriver-spec.html#delete-session\r\n[Element Click]: https://w3c.github.io/webdriver/webdriver-spec.html#element-click\r\n[Get Timeouts]: https://w3c.github.io/webdriver/webdriver-spec.html#get-timeouts\r\n[Get Window Rect]: https://w3c.github.io/webdriver/webdriver-spec.html#get-window-rect\r\n[insecure certificate]: https://w3c.github.io/webdriver/webdriver-spec.html#dfn-insecure-certificate\r\n[Minimize Window]: https://w3c.github.io/webdriver/webdriver-spec.html#minimize-window\r\n[New Session]: https://w3c.github.io/webdriver/webdriver-spec.html#new-session\r\n[New Window]: https://developer.mozilla.org/en-US/docs/Web/WebDriver/Commands/New_Window\r\n[Send Alert Text]: https://w3c.github.io/webdriver/webdriver-spec.html#send-alert-text\r\n[Set Timeouts]: https://w3c.github.io/webdriver/webdriver-spec.html#set-timeouts\r\n[Set Window Rect]: https://w3c.github.io/webdriver/webdriver-spec.html#set-window-rect\r\n[Status]: https://w3c.github.io/webdriver/webdriver-spec.html#status\r\n[Take Element Screenshot]: https://w3c.github.io/webdriver/webdriver-spec.html#take-element-screenshot\r\n[WebDriver errors]: https://w3c.github.io/webdriver/webdriver-spec.html#handling-errors\r\n\r\n[Bastien Orivel]: https://github.com/Eijebong\r\n[Jason Juang]: https://github.com/juangj\r\n[Jeremy Lempereur]: https://github.com/o0Ignition0o\r\n[Joshua Bruning]: https://github.com/joshbruning\r\n[Kalpesh Krishna]: https://github.com/martiansideofthemoon\r\n[Kriti Singh]: https://github.com/kritisingh1\r\n[Mike Pennisi]: https://github.com/jugglinmike\r\n[Nupur Baghel]: https://github.com/nupurbaghel\r\n[Shivam Singhal]: https://github.com/championshuttler\r\n[Sven Jost]: https://github/mythsunwind\r\n[Vlad Filippov]: https://github.com/vladikoff\"  },  {    \"url\": \"https://api.github.com/repos/mozilla/geckodriver/releases/19881096\",    \"assets_url\": \"https://api.github.com/repos/mozilla/geckodriver/releases/19881096/assets\",    \"upload_url\": \"https://uploads.github.com/repos/mozilla/geckodriver/releases/19881096/assets{?name,label}\",    \"html_url\": \"https://github.com/mozilla/geckodriver/releases/tag/v0.25.0\",    \"id\": 19881096,    \"node_id\": \"MDc6UmVsZWFzZTE5ODgxMDk2\",    \"tag_name\": \"v0.25.0\",    \"target_commitish\": \"cd8f8a78420fa4ee315052513ef926c81c6ae74d\",    \"name\": \"v0.25.0\",    \"draft\": false,    \"author\": {      \"login\": \"andreastt\",      \"id\": 399120,      \"node_id\": \"MDQ6VXNlcjM5OTEyMA==\",      \"avatar_url\": \"https://avatars3.githubusercontent.com/u/399120?v=4\",      \"gravatar_id\": \"\",      \"url\": \"https://api.github.com/users/andreastt\",      \"html_url\": \"https://github.com/andreastt\",      \"followers_url\": \"https://api.github.com/users/andreastt/followers\",      \"following_url\": \"https://api.github.com/users/andreastt/following{/other_user}\",      \"gists_url\": \"https://api.github.com/users/andreastt/gists{/gist_id}\",      \"starred_url\": \"https://api.github.com/users/andreastt/starred{/owner}{/repo}\",      \"subscriptions_url\": \"https://api.github.com/users/andreastt/subscriptions\",      \"organizations_url\": \"https://api.github.com/users/andreastt/orgs\",      \"repos_url\": \"https://api.github.com/users/andreastt/repos\",      \"events_url\": \"https://api.github.com/users/andreastt/events{/privacy}\",      \"received_events_url\": \"https://api.github.com/users/andreastt/received_events\",      \"type\": \"User\",      \"site_admin\": false    },    \"prerelease\": false,    \"created_at\": \"2019-03-05T13:18:07Z\",    \"published_at\": \"2019-09-10T13:26:03Z\",    \"assets\": [      {        \"url\": \"https://api.github.com/repos/mozilla/geckodriver/releases/assets/14846151\",        \"id\": 14846151,        \"node_id\": \"MDEyOlJlbGVhc2VBc3NldDE0ODQ2MTUx\",        \"name\": \"geckodriver-v0.25.0-linux32.tar.gz\",        \"label\": null,        \"uploader\": {          \"login\": \"andreastt\",          \"id\": 399120,          \"node_id\": \"MDQ6VXNlcjM5OTEyMA==\",          \"avatar_url\": \"https://avatars3.githubusercontent.com/u/399120?v=4\",          \"gravatar_id\": \"\",          \"url\": \"https://api.github.com/users/andreastt\",          \"html_url\": \"https://github.com/andreastt\",          \"followers_url\": \"https://api.github.com/users/andreastt/followers\",          \"following_url\": \"https://api.github.com/users/andreastt/following{/other_user}\",          \"gists_url\": \"https://api.github.com/users/andreastt/gists{/gist_id}\",          \"starred_url\": \"https://api.github.com/users/andreastt/starred{/owner}{/repo}\",          \"subscriptions_url\": \"https://api.github.com/users/andreastt/subscriptions\",          \"organizations_url\": \"https://api.github.com/users/andreastt/orgs\",          \"repos_url\": \"https://api.github.com/users/andreastt/repos\",          \"events_url\": \"https://api.github.com/users/andreastt/events{/privacy}\",          \"received_events_url\": \"https://api.github.com/users/andreastt/received_events\",          \"type\": \"User\",          \"site_admin\": false        },        \"content_type\": \"application/x-gzip\",        \"state\": \"uploaded\",        \"size\": 1433024,        \"download_count\": 5850,        \"created_at\": \"2019-09-10T13:25:15Z\",        \"updated_at\": \"2019-09-10T13:25:22Z\",        \"browser_download_url\": \"https://github.com/mozilla/geckodriver/releases/download/v0.25.0/geckodriver-v0.25.0-linux32.tar.gz\"      },      {        \"url\": \"https://api.github.com/repos/mozilla/geckodriver/releases/assets/14846152\",        \"id\": 14846152,        \"node_id\": \"MDEyOlJlbGVhc2VBc3NldDE0ODQ2MTUy\",        \"name\": \"geckodriver-v0.25.0-linux64.tar.gz\",        \"label\": null,        \"uploader\": {          \"login\": \"andreastt\",          \"id\": 399120,          \"node_id\": \"MDQ6VXNlcjM5OTEyMA==\",          \"avatar_url\": \"https://avatars3.githubusercontent.com/u/399120?v=4\",          \"gravatar_id\": \"\",          \"url\": \"https://api.github.com/users/andreastt\",          \"html_url\": \"https://github.com/andreastt\",          \"followers_url\": \"https://api.github.com/users/andreastt/followers\",          \"following_url\": \"https://api.github.com/users/andreastt/following{/other_user}\",          \"gists_url\": \"https://api.github.com/users/andreastt/gists{/gist_id}\",          \"starred_url\": \"https://api.github.com/users/andreastt/starred{/owner}{/repo}\",          \"subscriptions_url\": \"https://api.github.com/users/andreastt/subscriptions\",          \"organizations_url\": \"https://api.github.com/users/andreastt/orgs\",          \"repos_url\": \"https://api.github.com/users/andreastt/repos\",          \"events_url\": \"https://api.github.com/users/andreastt/events{/privacy}\",          \"received_events_url\": \"https://api.github.com/users/andreastt/received_events\",          \"type\": \"User\",          \"site_admin\": false        },        \"content_type\": \"application/x-gzip\",        \"state\": \"uploaded\",        \"size\": 1459114,        \"download_count\": 4942596,        \"created_at\": \"2019-09-10T13:25:15Z\",        \"updated_at\": \"2019-09-10T13:25:23Z\",        \"browser_download_url\": \"https://github.com/mozilla/geckodriver/releases/download/v0.25.0/geckodriver-v0.25.0-linux64.tar.gz\"      }    ],    \"tarball_url\": \"https://api.github.com/repos/mozilla/geckodriver/tarball/v0.25.0\",    \"zipball_url\": \"https://api.github.com/repos/mozilla/geckodriver/zipball/v0.25.0\",    \"body\": \"Built from [`bdb64cf16b68`](https://hg.mozilla.org/mozilla-central/rev/bdb64cf16b68c4a7212ba16aef425bce66d8f4ca).\r\n\r\n__Note to Windows users! With this release you must have the [Microsoft Visual Studio redistributable runtime](https://support.microsoft.com/en-us/help/2977003/the-latest-supported-visual-c-downloads) installed on your system for the binary to run. This is a [known bug](https://github.com/mozilla/geckodriver/issues/1617) with this particular release that we intend to release a fix for soon.__\r\n\r\n### Added\r\n\r\n- Added support for HTTP `HEAD` requests to the HTTPD\r\n\r\n  geckodriver now responds correctly to HTTP `HEAD` requests,\r\n  which can be used for probing whether it supports a particular API.\r\n\r\n  Thanks to [Bastien Orivel] for this patch.\r\n\r\n- Added support for searching for Nightly’s default path on macOS\r\n\r\n  If the location of the Firefox binary is not given, geckodriver\r\n  will from now also look for the location of Firefox Nightly in\r\n  the default locations.  The ordered list of search paths on macOS\r\n  is as follows:\r\n\r\n    1. `/Applications/Firefox.app/Contents/MacOS/firefox-bin`\r\n    2. `$HOME/Applications/Firefox.app/Contents/MacOS/firefox-bin`\r\n    3. `/Applications/Firefox Nightly.app/Contents/MacOS/firefox-bin`\r\n    4. `$HOME/Applications/Firefox Nightly.app/Contents/MacOS/firefox-bin`\r\n\r\n  Thanks to [Kriti Singh] for this patch.\r\n\r\n- Support for application bundle paths on macOS\r\n\r\n  It is now possible to pass an application bundle path, such as\r\n  `/Applications/Firefox.app` as argument to the `binary` field in\r\n  [`moz:firefoxOptions`].  This will be automatically resolved to\r\n  the absolute path of the binary when Firefox is started.\r\n\r\n  Thanks to [Nupur Baghel] for this patch.\r\n\r\n- macOS and Windows builds are signed\r\n\r\n  With this release of geckodriver, executables for macOS and Windows\r\n  are signed using the same certificate key as Firefox.  This should\r\n  help in cases where geckodriver previously got misidentified as\r\n  a virus by antivirus software.\r\n\r\n### Removed\r\n\r\n- Dropped support for legacy Selenium web element references\r\n\r\n  The legacy way of serialising web elements, using `{\\\"ELEMENT\\\": <UUID>}`,\r\n  has been removed in this release.  This may break older Selenium\r\n  clients and clients which are otherwise not compatible with the\r\n  WebDriver standard.\r\n\r\n  Thanks to [Shivam Singhal] for this patch.\r\n\r\n- Removed `--webdriver-port` command-line option\r\n\r\n  `--webdriver-port <PORT>` was an undocumented alias for `--port`,\r\n  initially used for backwards compatibility with clients\r\n  prior to Selenium 3.0.0.\r\n\r\n### Changed\r\n\r\n- Refactored Marionette serialisation\r\n\r\n  Much of geckodriver’s internal plumbing for serialising WebDriver\r\n  requests to Marionette messages has been refactored to decrease\r\n  the amount of manual lifting.\r\n\r\n  This work should have no visible side-effects for users.\r\n\r\n  Thanks to [Nupur Baghel] for working on this throughout her\r\n  Outreachy internship at Mozilla.\r\n\r\n- Improved error messages for incorrect command-line usage\r\n\r\n### Fixed\r\n\r\n- Errors related to incorrect command-line usage no longer hidden\r\n\r\n  By mistake, earlier versions of geckodriver failed to print incorrect\r\n  flag use.  With this release problems are again written to stderr.\r\n\r\n- Search system path for Firefox binary on BSDs\r\n\r\n  geckodriver would previously only search the system path for the\r\n  `firefox` binary on Linux.  Now it supports different BSD flavours\r\n  as well.\r\n\r\n[README]: https://github.com/mozilla/geckodriver/blob/master/README.md\r\n[Browser Toolbox]: https://developer.mozilla.org/en-US/docs/Tools/Browser_Toolbox\r\n[WebDriver conformance]: https://wpt.fyi/results/webdriver/tests?label=experimental\r\n\r\n[`CloseWindowResponse`]: https://docs.rs/webdriver/newest/webdriver/response/struct.CloseWindowResponse.html\r\n[`CookieResponse`]: https://docs.rs/webdriver/newest/webdriver/response/struct.CookieResponse.html\r\n[`DeleteSession`]: https://docs.rs/webdriver/newest/webdriver/command/enum.WebDriverCommand.html#variant.DeleteSession\r\n[`ElementClickIntercepted`]: https://docs.rs/webdriver/newest/webdriver/error/enum.ErrorStatus.html#variant.ElementClickIntercepted\r\n[`ElementNotInteractable`]: https://docs.rs/webdriver/newest/webdriver/error/enum.ErrorStatus.html#variant.ElementNotInteractable\r\n[`FullscreenWindow`]: https://docs.rs/webdriver/newest/webdriver/command/enum.WebDriverCommand.html#variant.FullscreenWindow\r\n[`GetNamedCookie`]: https://docs.rs/webdriver/newest/webdriver/command/enum.WebDriverCommand.html#variant.GetNamedCookie\r\n[`GetWindowRect`]: https://docs.rs/webdriver/newest/webdriver/command/enum.WebDriverCommand.html#variant.GetWindowRect\r\n[`InvalidCoordinates`]: https://docs.rs/webdriver/newest/webdriver/error/enum.ErrorStatus.html#variant.InvalidCoordinates\r\n[`MaximizeWindow`]: https://docs.rs/webdriver/newest/webdriver/command/enum.WebDriverCommand.html#variant.MaximizeWindow\r\n[`MinimizeWindow`]: https://docs.rs/webdriver/newest/webdriver/command/enum.WebDriverCommand.html#variant.MinimizeWindow\r\n[`NewSession`]: https://docs.rs/webdriver/newest/webdriver/command/enum.WebDriverCommand.html#variant.NewSession\r\n[`NoSuchCookie`]: https://docs.rs/webdriver/newest/webdriver/error/enum.ErrorStatus.html#variant.NoSuchCookie\r\n[`RectResponse`]: https://docs.rs/webdriver/0.27.0/webdriver/response/struct.RectResponse.html\r\n[`SendKeysParameters`]: https://docs.rs/webdriver/newest/webdriver/command/struct.SendKeysParameters.html\r\n[`SessionNotCreated`]: https://docs.rs/webdriver/newest/webdriver/error/enum.ErrorStatus.html#variant.SessionNotCreated\r\n[`SetTimeouts`]: https://docs.rs/webdriver/newest/webdriver/command/enum.WebDriverCommand.html#variant.SetTimeouts\r\n[`SetWindowRect`]: https://docs.rs/webdriver/newest/webdriver/command/enum.WebDriverCommand.html#variant.SetWindowRect\r\n[`StaleElementReference`]: https://docs.rs/webdriver/newest/webdriver/error/enum.ErrorStatus.html#variant.StaleElementReference\r\n[`UnableToCaptureScreen`]: https://docs.rs/webdriver/newest/webdriver/error/enum.ErrorStatus.html#variant.UnableToCaptureScreen\r\n[`UnknownCommand`]: https://docs.rs/webdriver/newest/webdriver/error/enum.ErrorStatus.html#variant.UnknownCommand\r\n[`UnknownError`]: https://docs.rs/webdriver/newest/webdriver/error/enum.ErrorStatus.html#variant.UnknownError\r\n[`WindowRectParameters`]: https://docs.rs/webdriver/newest/webdriver/command/struct.WindowRectParameters.html\r\n\r\n[Add Cookie]: https://developer.mozilla.org/en-US/docs/Web/WebDriver/Commands/AddCookie\r\n[invalid argument]: https://developer.mozilla.org/en-US/docs/Web/WebDriver/Errors/InvalidArgument\r\n[invalid session id]: https://developer.mozilla.org/en-US/docs/Web/WebDriver/Errors/InvalidSessionID\r\n[script timeout]: https://developer.mozilla.org/en-US/docs/Web/WebDriver/Errors/ScriptTimeout\r\n[timeout]: https://developer.mozilla.org/en-US/docs/Web/WebDriver/Errors/Timeout\r\n[timeout object]: https://developer.mozilla.org/en-US/docs/Web/WebDriver/Timeouts\r\n\r\n[hyper]: https://hyper.rs/\r\n[mozrunner crate]: https://crates.io/crates/mozrunner\r\n[serde]: https://serde.rs/\r\n[webdriver crate]: https://crates.io/crates/webdriver\r\n\r\n[Actions]: https://w3c.github.io/webdriver/webdriver-spec.html#actions\r\n[Delete Session]: https://w3c.github.io/webdriver/webdriver-spec.html#delete-session\r\n[Element Click]: https://w3c.github.io/webdriver/webdriver-spec.html#element-click\r\n[Get Timeouts]: https://w3c.github.io/webdriver/webdriver-spec.html#get-timeouts\r\n[Get Window Rect]: https://w3c.github.io/webdriver/webdriver-spec.html#get-window-rect\r\n[insecure certificate]: https://w3c.github.io/webdriver/webdriver-spec.html#dfn-insecure-certificate\r\n[Minimize Window]: https://w3c.github.io/webdriver/webdriver-spec.html#minimize-window\r\n[New Session]: https://w3c.github.io/webdriver/webdriver-spec.html#new-session\r\n[New Window]: https://developer.mozilla.org/en-US/docs/Web/WebDriver/Commands/New_Window\r\n[Send Alert Text]: https://w3c.github.io/webdriver/webdriver-spec.html#send-alert-text\r\n[Set Timeouts]: https://w3c.github.io/webdriver/webdriver-spec.html#set-timeouts\r\n[Set Window Rect]: https://w3c.github.io/webdriver/webdriver-spec.html#set-window-rect\r\n[Status]: https://w3c.github.io/webdriver/webdriver-spec.html#status\r\n[Take Element Screenshot]: https://w3c.github.io/webdriver/webdriver-spec.html#take-element-screenshot\r\n[WebDriver errors]: https://w3c.github.io/webdriver/webdriver-spec.html#handling-errors\r\n\r\n[Bastien Orivel]: https://github.com/Eijebong\r\n[Jason Juang]: https://github.com/juangj\r\n[Jeremy Lempereur]: https://github.com/o0Ignition0o\r\n[Joshua Bruning]: https://github.com/joshbruning\r\n[Kalpesh Krishna]: https://github.com/martiansideofthemoon\r\n[Kriti Singh]: https://github.com/kritisingh1\r\n[Mike Pennisi]: https://github.com/jugglinmike\r\n[Nupur Baghel]: https://github.com/nupurbaghel\r\n[Shivam Singhal]: https://github.com/championshuttler\r\n[Sven Jost]: https://github/mythsunwind\r\n[Vlad Filippov]: https://github.com/vladikoff\r\n\r\n[`moz:firefoxOptions`]: https://developer.mozilla.org/en-US/docs/Web/WebDriver/Capabilities/firefoxOptions\"  }]";

        [Test]
        public void Test()
        {
            Release[] releases = JsonConvert.DeserializeObject<Release[]>(data);

            Assert.That(releases.Length, Is.EqualTo(2));

            Assert.That(releases[1].Name, Is.EqualTo("v0.25.0"));
            Assert.That(releases[1].TagName, Is.EqualTo("v0.25.0"));

            Assert.That(releases[1].Assets.Length, Is.EqualTo(2));

            Assert.That(releases[1].Assets[1].BrowserDownloadUrl, Is.EqualTo("https://github.com/mozilla/geckodriver/releases/download/v0.25.0/geckodriver-v0.25.0-linux64.tar.gz"));
        }
    }
}
